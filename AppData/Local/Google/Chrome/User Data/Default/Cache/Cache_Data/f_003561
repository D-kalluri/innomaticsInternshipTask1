(self.webpackChunk_scribd_app_docpage=self.webpackChunk_scribd_app_docpage||[]).push([[73],{46675:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(72779),o=r.n(n),a=r(67294);function s(e){let{children:t,extra_classes:r}=e;return a.createElement("div",{className:o()("auto__shared_react_basic_card",r)},t)}s.defaultProps={extra_classes:""}},50691:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(72779),o=r.n(n),a=r(67294),s=r(51496);class i extends a.Component{constructor(e){super(e)}renderLegend(){const{hideLegend:e,legend:t}=this.props;if(!t)return;const r=a.createElement("legend",null,t);return e?a.createElement(s.TX,null,r):r}render(){const{children:e,horizontal:t}=this.props;return a.createElement("div",{className:"wrapper__doc_page_shared_forms_input_group"},a.createElement("fieldset",{className:o()("input_group",{horizontal:t})},this.renderLegend(),a.Children.map(e,((e,t)=>a.cloneElement(e,{key:t})))))}}i.defaultProps={hideLegend:!1,horizontal:!1,legend:""}},39059:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(72779),o=r.n(n),a=r(67294),s=r(51496),i=r(64481);function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends a.Component{constructor(e){super(e),l(this,"handleFocus",(()=>{this.setState({focused:!0}),"function"===typeof this.props.onFocus&&this.props.onFocus()})),l(this,"handleBlur",(()=>{this.setState({focused:!1})})),this.state={focused:!1},this.uid=i.hQ}render(){const{children:e,description:t,disabled:r,id:n,labelText:i,labelTextClass:l,name:d,onChange:c,onKeyDown:u,selected:m,value:p}=this.props,_=m?"icon-ic_radiobutton_filled":"icon-ic_radiobutton_empty",h=t&&a.createElement("span",{className:"description",id:this.uid("description")},t);return a.createElement("div",{className:o()("auto__doc_page_shared_forms_radio",this.props.class,"radio_component")},a.createElement("label",{className:o()("radio_label",_,{checked:m,focused:this.state.focused,with_description:t}),htmlFor:n||this.uid(p),onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:u},a.createElement(s.TX,null,a.createElement("input",{"aria-describedby":t?this.uid("description"):null,checked:m,className:"radio_input radio",disabled:r,id:n||this.uid(p),name:d,onChange:c,type:"radio",value:p})),i&&a.createElement("span",{className:o()("input_text",l)},i),h,e))}}d.defaultProps={children:[],description:"",disabled:!1,id:"",labelText:"",labelTextClass:"",name:"",onFocus:()=>{},onKeyDown:()=>{},selected:!1,value:""}},95073:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U});var n=r(57903),o=r(25291),a=r.n(o),s=r(72779),i=r.n(s),l=r(54488),d=r(67294),c=r(51496),u=r(64481),m=r(46675),p=r(55281),_=r.n(p),h=r(96940),f=r(50691),b=r(39059),v=r(99586);function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const{breakpoint_450:g}=h.BREAKPOINTS.DS1;class y extends d.Component{constructor(e){super(e),w(this,"handleSelection",(e=>{this.setState({format:e.target.value})})),w(this,"handleViewInSaved",(()=>{const e=this.props.document.id;(0,u.L9)("download_modal:view_in_saved:click",{document_id:e})})),w(this,"handleDownload",(e=>{e.preventDefault();const{platform:t,document:r,handleDownloadClick:n,saveItem:o}=this.props,{format:a}=this.state,s=this.iframeRef;(0,v.gp)(a,s,t,r,n,o)})),w(this,"handleRetry",(e=>{const t=this.props.document.id;(0,u.L9)("download_modal:retry_download:click",{document_id:t}),this.handleDownload(e)})),this.state={format:e.document.formats&&e.document.formats.length&&e.document.formats[0].extension},this.downloadSubtitleRef=d.createRef()}componentDidUpdate(){this.props.downloaded&&this.downloadSubtitleRef&&this.downloadSubtitleRef.current.focus()}renderSubtitle(){if(this.props.downloaded)return d.createElement("div",{className:"download_subtitle",tabIndex:"-1",ref:this.downloadSubtitleRef,"data-e2e":"post_download_msg"},l.Z.t("shared.doc_download_modal.download_started"))}renderFormat(e){if(this.state.format)return d.createElement(b.Z,{key:e.extension,labelText:e.extension,onChange:this.handleSelection,selected:this.state.format===e.extension,value:e.extension})}renderAlsoAddedToSaved(){const e=this.props.isSaved?l.Z.t("webpack.doc_page.src.shared.components.modals.Download.Download.also_added_to_your_saved_list"):l.Z.t("webpack.doc_page.src.shared.components.modals.Download.Download.also_adds_to_your_saved_list");return d.createElement("div",{className:"saved_to_library"},d.createElement("i",{className:"icon-ic_saved_for_later_2px","aria-hidden":"true"}),e)}renderDownloadButton(){if(!this.state.format)return;const{formats:e}=this.props.document,t=_()(e,{extension:this.state.format});return d.createElement(c.IH,{className:"download_selection_btn",href:"#",onClick:this.handleDownload},l.Z.t("webpack.doc_page.src.shared.modals.download.download.download_format_extension_touppercase_format_filesize",{format_extension_touppercase:t.extension.toUpperCase(),format_filesize:t.filesize}))}renderInputGroup(){const{formats:e}=this.props.document;if(!(e.length<2))return d.createElement(f.Z,{legend:l.Z.t("receipt.download.choose_document_format_type"),hideLegend:!0,horizontal:!0},e.map(this.renderFormat,this))}renderSelection(){if(!this.props.downloaded&&this.state.format)return d.createElement("div",{className:"selection_wrapper"},d.createElement("div",{className:"download_as"},l.Z.t("doc_page.shared.components.modals.download.download_as")),this.renderInputGroup(),d.createElement("div",{className:"button_container flex_col"},d.createElement("div",{className:"button_with_saved"},this.renderDownloadButton(),this.renderAlsoAddedToSaved())))}renderDownloadIframe(){if(!this.props.downloaded||(0,v.s)(this.props.platform))return;const{format:e}=this.state;return d.createElement("iframe",{ref:e=>this.iframeRef=e,width:"1",height:"1",title:l.Z.t("receipt.download.download_iframe"),frameBorder:"0",style:{display:"none"},src:(0,v.km)(e,this.props.document)})}renderDocumentViewRetryLinks(){if(!this.props.downloaded)return;let e;return this.props.width>g&&(e=d.createElement(c.Av,{className:"view_in_saved text_btn",href:this.props.libraryUrl,text:l.Z.t("receipt.download.view_in_saved_list"),onClick:this.handleViewInSaved})),d.createElement("div",{className:"bestsellers_picker_links"},d.createElement(c.Av,{className:"redownload_btn text_btn",onClick:this.handleRetry,text:l.Z.t("receipt.download.retry_download")}),e)}renderDownloadContent(){return d.createElement("div",{className:"content_wrapper"},this.renderSubtitle(),this.renderDocumentViewRetryLinks(),this.renderSelection())}render(){return d.createElement("div",{className:i()(v.fX,"download_module_wrapper","download_module")},this.renderDownloadIframe(),this.renderDownloadContent())}}y.defaultProps={isSaved:!1};var E=r(30912);const S=(0,n.$j)((e=>({platform:e.platform,width:e.viewport.width,libraryUrl:e.global.paths.actions.library_url,isSaved:e.page.wordDocument.in_library})),(e=>({saveItem:t=>{e((0,E.ch)(t,!0))}})))(y);var k,x,N,D=r(52631),P=r(77394),C=r(16192),Z=r(73357),j=r(75659);class I extends j.Z{constructor(e){super(e),this.enclosing_class("auto__doc_page_save_only_cell")}component_classes(){return i()({main_item:this.props.main_item})}render_stars(){if(!this.props.star_rating_props)return;const e=this.props.star_rating_props.system_rating,t=[],r=Math.ceil(e);for(let o=1;o<=5;o++)t.push(d.createElement("span",{className:i()("rating_star",{light_lit:o<=r,"icon-ic_star_small_fill":o<=e,"icon-ic_star_small_halffill":o>e&&o<=r,"icon-ic_star_small_outline":o>r}),key:o,"aria-hidden":"true"}));const n=d.createElement("span",{className:"rating"},e,"/5");return d.createElement(d.Fragment,null,t,n)}render_content(){const{id:e,in_library:t,title:r,short_title:n}=this.props,o={id:e,in_library:t,title:r,short_title:n};let a,s;var i;this.props.main_item?s=d.createElement("span",{className:"saveonly_subtitle"},l.Z.t("webpack.doc_page.src.shared.components.modals.Download.Receipt.InfiniteScrollingBestsellers.SaveOnlyCell.SaveOnlyCell.your_document")):a=d.createElement("span",{className:"saveonly_subtitle"},null===(i=this.props.author)||void 0===i?void 0:i.name);return d.createElement(d.Fragment,null,d.createElement("div",{className:"thumbnail"},this.render_image()),d.createElement("div",{className:"metadata"},s,d.createElement("h3",{className:"saveonly_title"},this.props.title),a,d.createElement("div",{className:"stars"},this.render_stars()),d.createElement(Z.Z,{prominent_style:!0,show_icon:!0,show_text:!0,outline_btn:!0,wordDocument:o,location:"download_modal_bestsellers"})))}}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R.apply(this,arguments)}function B(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}k=I,N={carousel_scrolling_ref:null,handle_rec_click:()=>{},handle_rec_view:()=>{},hide_author:!1,in_view_check_events:[],lazy_load:!0,main_item:!1,persona_icon_props:null,retina_thumb_url:"",small:!1},(x=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(x="defaultProps"))in k?Object.defineProperty(k,x,{value:N,enumerable:!0,configurable:!0,writable:!0}):k[x]=N;class T extends d.Component{constructor(e){super(e),B(this,"fetchBestSellersPage",(e=>{let t=`${this.props.bestsellersUrl}/?page=${e}`;this.state.compilationId&&(t+=`&compilation_id=${this.state.compilationId}`),u.Be.get({url:t,headers:{Accept:"application/json","Content-Type":"application/json"}},this.handleBestsellerPageResponse),this.setState({loading:!0})})),B(this,"handleIsKeyboardUser",(()=>{if(!this.props.isKeyboardUser)return;const e=document.querySelector(".cards").querySelectorAll(".edit_saved_btn");e.length>21&&e[e.length-20].focus()})),B(this,"handleBestsellerPageResponse",((e,t,r)=>{if(e)return this.setState({loading:!1});const n=JSON.parse(r),{rec_tracking_json:o,documents:a}=n.best_sellers_props,{compilation_id:s,uuid:i,widget_name:l}=o;this.tracking||(this.tracking=new C.Z(s,l),this.tracking.track_module_view(i,"doc_page_bestsellers_picker"));const d=a.map(((e,t)=>{const r={doc_uuid:o.recs[t]};return e.tracking=r,e}));this.setState({compilationId:s,documents:this.state.documents.concat(d),page:this.state.page+1,loading:!1})})),B(this,"handleRecView",(e=>{this.tracking&&this.tracking.track_obj_view(e)})),B(this,"handleLoadMoreClick",(()=>{this.fetchBestSellersPage(this.state.page)})),B(this,"renderAvailableInSubscription",(()=>{if(this.props.isSubscriber)return d.createElement("div",{className:"available_in_subscription"},d.createElement("div",{className:"icon_wrapper"},d.createElement(c.JO,{icon:"checkmark_outline_circle"})),d.createElement("div",{className:"copy_wrapper"},d.createElement("div",null,l.Z.t("webpack.doc_page.src.shared.components.modals.Download.Receipt.InfiniteScrollingBestsellers.InfiniteScrollingBestsellers.included_in_your_membership")),d.createElement("div",null,l.Z.t("webpack.doc_page.src.shared.components.modals.Download.Receipt.InfiniteScrollingBestsellers.InfiniteScrollingBestsellers.at_no_additional_cost"))))})),B(this,"renderCells",(()=>{if(!this.state.documents.length)return;const e=Object.assign({},this.props.wordDocument,{main_item:!0}),t=this.renderCell(e,"main_doc"),r=this.state.documents.map((e=>this.renderCell(e,e.id)));return d.createElement(d.Fragment,null,t,r)})),B(this,"renderCell",((e,t)=>d.createElement(I,R({},e,{lazy_load:!1,thumb_url:e.image_url,carousel_scrolling_ref:this.container.current,in_view_check_events:["bestsellers:scroll"],handle_rec_view:this.handleRecView,key:t})))),B(this,"renderLoadingSpinner",(()=>{if(this.state.loading)return d.createElement(P.Z,null)})),B(this,"renderLoadMore",(()=>{if(!this.state.loading)return d.createElement("div",{className:"load_more"},d.createElement(c.IH,{className:"load_more_button",onClick:this.handleLoadMoreClick},l.Z.t("webpack.doc_page.src.shared.components.modals.Download.Receipt.InfiniteScrollingBestsellers.InfiniteScrollingBestsellers.load_more")))})),this.state={compilationId:null,documents:[],loading:!1,page:1},this.container=d.createRef()}componentDidMount(){this.fetchBestSellersPage(this.state.page)}componentDidUpdate(){this.handleIsKeyboardUser()}render(){return d.createElement("div",{className:"wrapper__infinite_scrolling_bestsellers",ref:this.container},this.renderAvailableInSubscription(),d.createElement("ul",{className:"cards"},this.renderCells()),this.renderLoadMore(),this.renderLoadingSpinner())}}const L=(0,n.$j)((e=>({bestsellersUrl:e.global.paths.actions.bestsellers_url,isKeyboardUser:e.viewport.isKeyboardUser,isSubscriber:e.user.isSubscriber,wordDocument:e.page.wordDocument})),null)(T);const O=a()((()=>{{const e="__CJ_receipt_lightbox:position";let t=(0,u.ej)(e);return t="undefined"===typeof t||"true"!==t,(0,u.d8)(e,t),t}}));class F extends D.Z{constructor(e){super(e),this.enclosing_class(i()("auto__doc_page_shared_modals_download_receipt","bestsellers_picker")),this.state={show_content_types:O(),downloaded:!1}}componentDidMount(){(0,u.L9)("download_modal:lightbox:view")}componentWillUnmount(){this.state.downloaded&&(0,u.L9)("download_started_modal:control:close")}isMobile(){return this.props.mobile_app_link}get_title(){return d.createElement(d.Fragment,null,d.createElement(c.TX,null,l.Z.t("receipt.download.downloading")),this.props.document.title)}handle_download_click(){this.setState({downloaded:!0},(()=>{(0,u.L9)("download_started_modal:control:view")}))}render_doc_title(){return d.createElement("div",{className:"doc_info_wrapper"},this.render_doc_thumbnail(),d.createElement("div",{className:"doc_title_wrapper"},d.createElement("div",{className:"doc_title"},this.get_title()),d.createElement("div",{className:"uploaded_by"},l.Z.t("webpack.doc_page.src.shared.components.modals.Download.Receipt.Receipt.uploaded_by_this_props_document_author_name",{this_props_document_author_name:this.props.document.author.name}))))}render_doc_thumbnail(){const{image_url:e,retina_image_url:t}=this.props.document;return d.createElement("div",{className:"thumbnail"},d.createElement("img",{className:"document thumb_img",src:e,alt:l.Z.t("receipt.download.document"),srcSet:`${t} 2x`}))}render_bestsellers_picker(){return d.createElement(d.Fragment,null,d.createElement(S,{document:this.props.document,downloaded:this.state.downloaded,handleDownloadClick:this.handle_download_click}),d.createElement(L,null))}render_content(){const e=this.render_bestsellers_picker();return d.createElement(d.Fragment,null,this.render_modal_title(l.Z.t("shared.doc_download_modal.download_document"),"download_modal_title","download_modal_title"),d.createElement(m.Z,{extra_classes:"download_card"},this.render_doc_title(),e))}}!function(e,t,r){(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(F,"defaultProps",{no_module:!1});const U=(0,n.$j)((e=>{const t=e.user,r=e.page.wordDocument.show_archive_paywall;return{no_module:!t.isSubscriber&&!r}}),null)(F)},99586:(e,t,r)=>{"use strict";r.d(t,{fX:()=>n,km:()=>l,gp:()=>d,s:()=>i});const n="auto__doc_page_receipt_download",o={docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",ppt:"application/vnd.openxmlformats-officedocument.presentationml.presentation",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};var a=r(64481),s=r(37977);function i(e){return["iphone","ipad"].includes(e)}function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{download_url:n,access_key:a}=t,i={secret_password:a,extension:e};if(r.showPdf){i.show_pdf=!0;const t=o[e];t&&(i.content_type=t,i.exclude_disposition=!0)}return`${n}/?${(0,s.p)(i)}`}function d(e,t,r,n,o,s){if(i(r)){const t=l(e,n,{showPdf:!0});(0,a.L9)("download_lightbox:opened_in_new_tab",{format:e}),window.open(t,"_blank")}else t&&(t.src+="");o(),s(n.id)}},52631:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(72779),o=r.n(n),a=r(67294),s=r(64481),i=r(62140);function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends i.Z{constructor(e){super(e),l(this,"close",(()=>{this.props.close_modal(this.props.id)})),this.enclosing_class("auto__doc_page_shared_modals_modal_content")}component_classes(){return"modal_content_component"}render_modal_title(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return a.createElement("h2",{"aria-label":this.props.aria_label,id:`modal_title_${this.props.id}`,className:o()("title",t),"data-e2e":r},e)}}d.defaultProps={allowWrapperDismiss:!0,animation_speed:300,children:a.createElement(a.Fragment,null),className:"",close_all_modals:s.ZT,close_modal:s.ZT,handle_load_complete:()=>{},props_loader:()=>Promise.resolve({}),render_lite:!1,render_placeholder:void 0,user_dismiss:!0}},21359:e=>{e.exports=function(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},98776:(e,t,r)=>{var n=r(68286),o=r(67878),a=r(90249);e.exports=function(e){return function(t,r,s){var i=Object(t);if(!o(t)){var l=n(r,3);t=a(t),r=function(e){return l(i[e],e,i)}}var d=e(t,r,s);return d>-1?i[l?t[d]:d]:void 0}}},55281:(e,t,r)=>{var n=r(98776)(r(12982));e.exports=n},12982:(e,t,r)=>{var n=r(21359),o=r(68286),a=r(38101),s=Math.max;e.exports=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var l=null==r?0:a(r);return l<0&&(l=s(i+l,0)),n(e,o(t,3),l)}}}]);
//# sourceMappingURL=https://www.scribd.com/webpack/doc_page/73.3772f8.js.map